<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>商户信息查看</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet"
	href="/sps-admin/page/layui/css/layui.css" media="all" />
<style type="text/css">
 .spsImages{
 	height: 200px;
 	width: 400px;
 	background-color: #eee;
 }
 .imageSize{
  	height: 200px;
 	width: 400px;
 }
</style>
</head>
<body>
<div class="layui-tab layui-tab-brie" lay-filter ="tab" style="padding:10px;" >
  <ul class="layui-tab-title">
    <li lay-id="channelInfo" class="layui-this">基本信息</li>
    <li lay-id="goodsInfo" id="goodsInfo" >商品信息</li>
    <li lay-id="picInfo" id="goodsInfo" >额度信息</li>
    <li lay-id="picInfo" id="goodsInfo" >操作员信息</li>
    <li lay-id="picInfo" id="picInfo" >图片资料</li>
  </ul>
  <div class="layui-tab-content">
    <div class="layui-tab-item layui-show">
	<div class="layui-form" style="margin-left: 100px;margin-right: 100px">
		<h3>属性信息</h3>
		<hr>
		  <!-- 属性信息开始 -->
		  <div class="layui-form-item " >
		    <label class="layui-form-label" style="width:200px">*所在城市：</label>
		    <div class="layui-input-inline" >
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		  <div class="layui-form-item" >
		    <label class="layui-form-label" style="width:200px">*店付业务员姓名：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*店付业务员身份证：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		  <div class="layui-form-item" id="passwordDiv">
		   <label class="layui-form-label" style="width:200px">*核心商户编号：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*核心商户状态：</label>
		    <div class="layui-input-inline">
		     <div class="layui-form-mid layui-word-aux">&nbsp未激活</div>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*上线时间：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*冻结时间：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*营业执照编号：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*公司名称：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">公司注册地址：</label>
		    <div class="layui-input-inline" >
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">公司实际地址：</label>
		    <div class="layui-input-inline" >
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*法人代表姓名：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*经营年限(年)：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*员工数量(人)：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		<!-- 属性信息结束 -->
		<h3>业务信息</h3>
		<hr>
		<!-- 业务信息开始 -->
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">主营业务：</label>
		    <div class="layui-input-inline" style="width:600px" id="businessProduct">
		      <input type="checkbox"  title="一级分类名称1" value="1" lay-filter = "businessProduct">
		      <input type="checkbox"  title="一级分类名称2" value="2" lay-filter = "businessProduct">
		    </div>
		  </div>
		  <div class="layui-form-item"><!-- 树 -->
		    <label class="layui-form-label" style="width:200px">主营商品类型：</label>
		    <div class="layui-input-inline" style="width:600px" id="businessType">
		      <input type="checkbox" title="三级分类名称1" value="1" lay-filter = "businessType" >
		      <input type="checkbox" title="三级分类名称2" value="2" lay-filter = "businessType">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">主营品牌：</label>
		    <div class="layui-input-inline" style="width:600px" id="businessBrand">
		      <input type="checkbox"  title="品牌名称1" value="1" lay-filter = "businessBrand">
		      <input type="checkbox"  title="品牌名称2" value="2" lay-filter = "businessBrand">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px	">业务覆盖地域范围：</label>
		    <div class="layui-input-inline">
		     <select lay-verify="required" name="businessScope" lay-filter="businessScope" id="businessScope"> 
				  <option value="">请选择</option>
				  <option value="1">全国</option>
				  <option value="2">本省</option>
				  <option value="3">本市</option>
				  <option value="4">本县</option>
		      </select>
		    </div>
		  </div>
		<!-- 业务信息结束 -->
		<h3>担保信息</h3>
		<hr>
		<!-- 担保信息开始 -->
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*担保形式：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*保证金金额：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*法人代表手机号：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*财务联系人姓名：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*财务联系人手机号：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*业务负责人姓名：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*业务负责人手机号：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		    <label class="layui-form-label" style="width:200px">*业务负责人手机服务密码：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		<!-- 担保信息结束 -->
		<h3>收款信息</h3>
		<hr>
		<!-- 收款信息开始 -->
		<table id="gatherList" lay-filter="gatherTables"></table>
		<!-- 收款信息结束 -->
		<h3>财务指标</h3>
		<hr>
		<!-- 财务指标开始 -->
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*上年销售额(万元)：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		  </div>
		<!-- 财务指标结束 -->
		<h3>物流配送</h3>
		<hr>
		<!-- 物流配送开始 -->
		 <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px	">发货方式：</label>
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*合作物流名称：</label>
		    <div class="layui-input-inline">
		      <input id="logisticsCooperationName" type="logisticsCooperationName" name="name" lay-verify="required" placeholder="搜索" autocomplete="off" class="layui-input">
		    </div>
		    <label class="layui-form-label" >*其他：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		   </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*年物流总费用(万元)：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		   </div>
		<!-- 物流配送结束 -->
		<h3>开户信息</h3>
		<hr>
		<!-- 开户信息开始 -->
<!-- 		<div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*管理员账号：</label>
		    <div class="layui-input-inline">
		      <input value = "18513967345" id="adminNum" type="text" name="adminNum" lay-verify="required" placeholder="请输入管理员账号" autocomplete="off" class="layui-input">
		    </div>
		    <div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		</div>
		<div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*管理员手机号：</label>
		    <div class="layui-input-inline">
		      <input value = "18513967345" id="adminNum" type="text" name="adminNum" lay-verify="required" placeholder="请输入管理员账号" autocomplete="off" class="layui-input">
		    </div>
		    <div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		</div> -->
		<div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*签约开始日期：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
			 </div>
		</div>
		<div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*签约结束日期：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
			 </div>
		</div>
<!-- 		<div class="layui-form-item" >
		    <label class="layui-form-label" style="width:200px	">适用产品：</label>
		    <div class="layui-input-inline" style="width:300px">
		      <input type="checkbox" title="7天包息" value="0" lay-skin="primary" lay-filter="openApplyProduct" >
		      <input type="checkbox" title="7天不包息" value="1" lay-skin="primary" lay-filter="openApplyProduct">
		    </div>
		  </div> -->
<!-- 		<div class="layui-form-item">
		    <label class="layui-form-label" style="width:200px">*代销手续费率（%）：</label>
		    <div class="layui-input-inline">
		    	<div class="layui-form-mid layui-word-aux"> lili@juzifenqi</div>
		    </div>
		</div> -->
	</div>
    </div>
    <!-- 商品信息 -->
    <div class="layui-tab-item">
    	
    </div>
    <!-- 额度信息 -->
    <div class="layui-tab-item">
    </div>
    <!-- 操作员信息 -->
    <div class="layui-tab-item">
    </div>
    <!-- 图片资料 -->
    <div class="layui-tab-item">
   			<div align="center">
   				<div class="layui-row layui-col-space10">
    				<ul>
	   				<li>
	   					<div class="layui-col-md4">
		   					<a href="javascript:void(0)" class="spsImages" >
		   						<img alt="" src="/sps-admin/page/static/images/404.png" class="imageSize">
		   					</a>
		   					<p>营业执照</p>
	   					</div>
	   				</li>
   				</ul>
   				</div>
			</div>
    </div>
  </div>
<script type="text/javascript"
		src="/sps-admin/page/layui/layui.js"></script>
<script type="text/javascript">
	layui.use(['form','table','laydate','flow','element','upload'], function(){
	  var element = layui.element;
	  var form = layui.form;
	  var $ = layui.jquery;
	  var table = layui.table;
	  var laydate = layui.laydate;
	  var flow = layui.flow;
	  var upload = layui.upload;
	  var businessProductArray = [];//主营业务数组
	  var businessTypeArray = [];//主营商品类型数组
	  var businessBrandArray = [];//主营品牌数组
	  var logisticsWay = [];//发货方式
	  var openApplyProduct = ['0'];//适用产品
	  var gatherListJson = null;
	  var channelNum ;//外键,很多地方能用到
	  form.render(); 
	  $('input').attr('disabled')
	  $('#next').on('click',function(){
 /* 			  $.post({
				  url:'/sps-admin/merchant/insertGather.html',
				  dataType:'json',
				  data:{
					  gathers:gatherListJson,
					  }
				  });  */
				  $('#picInfo').removeAttr('style')
	     //addGather(gatherListJson,'1')
		  element.tabChange('tab','picInfo')

	  })
	  $('#last').on('click',function(){
		  element.tabChange('tab','channelInfo')

	  })
	  //收款信息
	  table.render({
		    elem: '#gatherList'
		    ,url: '/sps-admin/merchant/getGatherList.json' //数据接口
		    ,id:'gather'
		    ,page:true
		    ,limit:5
		    ,limits:[5,10,15]
		    ,cols: [[ //表头
		      {field: 'gatherId', title: '序号', align:'center'}
		      ,{field: 'gatherBankId', title: '收款银行卡账号', align:'center'}
		      ,{field: 'gatherOwnerName', title: '所有人姓名',align:'center'}
		      ,{field: 'gatherIdcard', title: '身份证号', width:230, align:'center'}
		      ,{field: 'gatherPhone', title: '银行卡绑定手机号码', width:130,align:'center'} 
		      ,{field: 'gatherDepositBank', title: '开户银行', width:170,align:'center'} 
		      ,{field: 'gatherBankBranch', title: '开户行分行', width:170,align:'center'} 
		      ,{field: 'gatherBankSubbranch', title: '开户行支行', width:170,align:'center'} 
		    ]]
		  });
 	  form.on('submit(submitAddChanel)', function(data){
		  	  /*
		  	   	渠道属性
		  	  */
			  //地址
			  var address = $('#province').find("option:selected").text()+
			 				 $('#city').find("option:selected").text()+
			 				 $('#area').find("option:selected").text();
		  	  var channelSalesmanName = $('#channelSalesmanName').val();//店付业务员姓名
		  	  var channelSalesmanNum = $('#channelSalesmanNum').val();//店付业务员编号
		  	  /*
		  	   	企业基本信息
		  	  */
			  var enterpriseBusinesslicenseNo = $('#enterpriseBusinesslicenseNo').val();//营业执照编号
			  var enterpriseCompanyName = $('#enterpriseCompanyName').val();//公司名称
			  //公司注册地址
			  var registerAddress = $('#registerProvince').find("option:selected").text()+
			 				 $('#registerCity').find("option:selected").text()+
			 				 $('#registerArea').find("option:selected").text();
			  //公司实际地址
			  var realAddress = $('#realProvince').find("option:selected").text()+
			 				 $('#realCity').find("option:selected").text()+
			 				 $('#realArea').find("option:selected").text();
			  var enterpriseCorp = $('#enterpriseCorp').val();//法人名称
			  var enterpriseOperatioTime = $('#enterpriseOperatioTime').val();//经营年限(年)
			  var enterpriseEmployeeNum = $('#enterpriseEmployeeNum').val();//员工数量(人)
		  	  /*
		  	   	业务信息
		  	  */
			  businessScope = $('#businessScope').find("option:selected").text();//业务覆盖地域范围
		  	  /*
		  	   	担保信息
		  	  */
			  var guaranteeSituation = $('#guaranteeSituation').find("option:selected").text();//担保形式
			  var guaranteeDeposit = $('#guaranteeDeposit').val();//保证金金额
			  var guaranteeCorpPhone = $('#guaranteeCorpPhone').val();//法人手机
			  var guaranteeFinanceContactname = $('#guaranteeFinanceContactname').val();//财务联系人姓名
			  var guaranteeFinanceContactphone = $('#guaranteeFinanceContactphone').val();//财务联系人手机号
			  var guaranteeBusinessLeadername = $('#guaranteeBusinessLeadername').val();//业务负责人姓名
			  var guaranteeBusinessLeaderphone = $('#guaranteeBusinessLeaderphone').val();//业务负责人手机
			  var guaranteeBusinessPhonePassword = $('#guaranteeBusinessPhonePassword').val();//服务密码
			  /*
		  	   	收款账号:窗口添加
		  	  */
		  	  //TODO:
		  	  /*
		  	   	财务指标
		  	  */
		  	  var targetLastSale = $('#targetLastSale').val();//保证金金额
		  	  /*
		  	   	物流配送
		  	  */
		  	  var logisticsCooperationName = $('#logisticsCooperationName').val();//合作物流：
		  	  var logisticsOther = $('#logisticsOther').val();//其他：
		  	  var logisticsAllCost = $('#logisticsAllCost').val();//年物流总费用(万元)：
		  	  /*
		  	   	开户信息
		  	  */
			  //var openAdminNum = $('#adminNum').val();//管理员账号
			  var openStartTime = $('#startTime').val();//起始时间
			  var openEndTime = $('#endTime').val();//结束时间
			  var openSellRate = $('#sell').val();//费率
			  
 			  $.post({
				  url:'/sps-admin/merchant/insertChannel.html',
				  dataType:'json',
				  data:{
					  	//渠道信息
 		 				channelCity:address,
		 				channelSalesmanName:channelSalesmanName,
		 				channelSalesmanNum:channelSalesmanNum,
		 				channelState:0,
		 				//企业信息
  		 				enterpriseBusinesslicenseNo:enterpriseBusinesslicenseNo,
		 				enterpriseCompanyName:enterpriseCompanyName,
		 				enterpriseCompanyRegisterAddr:registerAddress,
		 				enterpriseCompanyRealitAddr:realAddress,
		 				enterpriseCorp:enterpriseCorp,
		 				enterpriseCorpIdcard:'123423',
		 				enterpriseOperatioTime:enterpriseOperatioTime,
		 				enterpriseEmployeeNum:enterpriseEmployeeNum,
		 				//业务信息
		 				businessProduct:businessProductArray.toString(),
		 				businessType:businessTypeArray.toString(),
		 				businessBrand:businessBrandArray.toString(),
		 				businessScope:businessScope,
		 				//担保信息
		 				guaranteeSituation:guaranteeSituation,
		 				guaranteeDeposit:guaranteeDeposit,
		 				guaranteeCorpPhone:guaranteeCorpPhone,
		 				guaranteeFinanceContactname:guaranteeFinanceContactname,
		 				guaranteeFinanceContactphone:guaranteeFinanceContactphone,
		 				guaranteeBusinessLeadername:guaranteeBusinessLeadername,
		 				guaranteeBusinessLeaderphone:guaranteeBusinessLeaderphone,
		 				guaranteeBusinessPhonePassword:guaranteeBusinessPhonePassword,
		 				//财务指标
		 				targetLastSale:targetLastSale,
		 				//物流配送
		 				logisticsWay:logisticsWay.toString(),
		 				logisticsCooperationName:logisticsCooperationName,
		 				logisticsAllCost:logisticsAllCost,
		 				logisticsOther:logisticsOther, 
		 				//开户
		 				//管理员账户为业务负责人手机号
 		 				openAdminNum:guaranteeBusinessLeaderphone,
		 				//管理员手机号为业务负责人手机号
		 				openAdminPhone:guaranteeBusinessLeaderphone,
		 				openStartTime:openStartTime,
		 				openEndTime:openEndTime,
		 				//openApplyProduct:openApplyProduct.toString(),
		 				openApplyProduct:openApplyProduct.toString(),
		 				openSellRate:openSellRate, 
				  },
				  success:function(result){
					  if(result.state == 'success'){
						  //信息添加成功后添加收款列表
						var state = addGather(gatherListJson,result.channelNum)
						layer.msg(result.msg,{icon: result.icon});
						channelNum = result.channelNum
					  }else if(result.state == 'error'){
						  layer.msg(result.msg,{icon: result.icon});
					  }else if(result.state == 'exit'){
						  layer.msg(result.msg,{icon: result.icon});
					  }
				  },
				  error:function(){
					  layer.msg('网络错误',{icon: 2});
				  }
			  }) 
	  }) 
	  	function addGather(gatherListJson,channelNum){
	  		$.each(gatherListJson,function(i,data){
	  			$.post({
	  				url:'/sps-admin/merchant/insertGather.html',
	  				dataType:'json',
	  				data:{
	  					gatherBankId:data.gatherBankId,
	  					gatherOwnerName:data.gatherOwnerName,
	  					gatherPhone:data.gatherPhone,
	  					gatherIdcard:data.gatherIdcard,
	  					gatherDepositBank:data.gatherDepositBank,
	  					gatherBankBranch:data.gatherBankBranch,
	  					gatherBankSubbranch:data.gatherBankSubbranch,
	  					channelNum:channelNum
	  				},
	  				success:function(result){},
	  				error:function(){
	  					layer.msg('收款信息添加异常',{icon: 2});
	  				}
	  			})
	  		})
	  	}
	});
</script>
</body>
</html>